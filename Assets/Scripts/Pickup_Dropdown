using UnityEngine

public class PlayerPickup : MonoBehaviour
{  
  public Transform holdPoint;
  public float pickupRange = 3f;
  public Keycode interactKey = KeyCode.E;


  private GameObject currentItem;

  void Update()
  {
    if(Input.GetKeyDown(interactKey))
    {
      if (currentItem == null)
      {
        TryPickup();
      }
      else
      {
        DropItem;
      }
    }
  }

  void TryPickup()
  {
    Ray ray = new Ray(transform.position, transform.forward);
    RaycastHit hit;

    if (Physics.Raycast(ray, out hit, pickupRange))
    {
      if (hit.collider.CompareTag("Pickup"))
      { 
        currentItem = hit.collidor.gameObject;

        Rigibody rb = currenItem.GetComponent<Rigibody>();
        rb.isKinematic = true;

        currentItem.transform.SetParent(holdPoint);
        currentItem.transform.localPosition = Vector3.Zero;
        currentItem.transform.localRotation = Quaternion.identity;
      }
    }
  }

  void DropItem()
  {
    Rigibody rb = currentItem.GetComponent<Rigibody>();
    rb.isKinematic = false;

    currentItem.transform.SetParent(null);

    rb.AddForce(transform.forward = 2f, Forcemode.Impulse);

    currentItem = null;
  }
